<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <meta name="robots" content="noindex,nofollow,noarchive" />
    <meta name="referrer" content="no-referrer" />

    <script>
      MathJax = {
        chtml: {
          displayAlign: "left",
          displayIndent: "1em",
        },
      };
    </script>

    

    <link rel="icon" href="favicon.ico" sizes="any" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
      integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=M+PLUS+Rounded+1c"
    />
    <link rel="stylesheet" href="style.css" />

    <title>第01回 4I-データベース工学</title>
  </head>

  <body>
    <div class="openbtn"><span></span><span></span><span></span></div>
    <nav id="g-nav">
      <div id="g-nav-list">
        <!-- ---------------------------------------- -->
         <ul>
<li><a href="#ガイダンス" id="toc-ガイダンス"><span class="toc-section-number">1</span>
ガイダンス</a>
<ul>
<li><a href="#概要" id="toc-概要"><span class="toc-section-number">1.1</span> 概要</a></li>
<li><a href="#授業の位置づけ" id="toc-授業の位置づけ"><span class="toc-section-number">1.2</span>
授業の位置づけ</a></li>
<li><a href="#成績評価法と履修条の注意" id="toc-成績評価法と履修条の注意"><span
class="toc-section-number">1.3</span> 成績評価法と履修条の注意</a></li>
</ul></li>
<li><a href="#データベースとは" id="toc-データベースとは"><span class="toc-section-number">2</span>
データベースとは</a></li>
<li><a href="#なぜdbms-が利用されるのか" id="toc-なぜdbms-が利用されるのか"><span
class="toc-section-number">3</span> なぜ、DBMS が利用されるのか？</a>
<ul>
<li><a href="#データの永続化" id="toc-データの永続化"><span class="toc-section-number">3.1</span>
データの永続化</a></li>
<li><a href="#osのファイルシステムを直接利用したデータの永続化の問題"
id="toc-osのファイルシステムを直接利用したデータの永続化の問題"><span
class="toc-section-number">3.2</span>
OSのファイルシステムを直接利用したデータの永続化の問題</a></li>
<li><a href="#汎用性や拡張性に関する問題や制約" id="toc-汎用性や拡張性に関する問題や制約"><span
class="toc-section-number">3.3</span> 汎用性や拡張性に関する問題や制約</a></li>
<li><a href="#同時アクセスと排他制御に関する問題や制約"
id="toc-同時アクセスと排他制御に関する問題や制約"><span class="toc-section-number">3.4</span>
同時アクセスと排他制御に関する問題や制約</a></li>
<li><a href="#セキュリティとアクセス制御に関する問題や制約"
id="toc-セキュリティとアクセス制御に関する問題や制約"><span class="toc-section-number">3.5</span>
セキュリティとアクセス制御に関する問題や制約</a></li>
<li><a href="#ネットワーク経由のアクセスに関する問題や制約"
id="toc-ネットワーク経由のアクセスに関する問題や制約"><span class="toc-section-number">3.6</span>
ネットワーク経由のアクセスに関する問題や制約</a></li>
<li><a href="#データサイズやパフォーマンスに関する問題や制約"
id="toc-データサイズやパフォーマンスに関する問題や制約"><span class="toc-section-number">3.7</span>
データサイズやパフォーマンスに関する問題や制約</a></li>
</ul></li>
<li><a href="#dbms-を利用したデータ管理の概要" id="toc-dbms-を利用したデータ管理の概要"><span
class="toc-section-number">4</span> DBMS を利用したデータ管理の概要</a>
<ul>
<li><a href="#osのファイルシステムを直接利用したデータ管理"
id="toc-osのファイルシステムを直接利用したデータ管理"><span class="toc-section-number">4.1</span>
OSのファイルシステムを直接利用したデータ管理</a></li>
<li><a href="#dbms-を使ったデータ管理" id="toc-dbms-を使ったデータ管理"><span
class="toc-section-number">4.2</span> DBMS を使ったデータ管理</a></li>
</ul></li>
<li><a href="#データベースの種類" id="toc-データベースの種類"><span
class="toc-section-number">5</span> データベースの種類</a></li>
<li><a href="#リレーショナルデータベース-rdb" id="toc-リレーショナルデータベース-rdb"><span
class="toc-section-number">6</span> リレーショナルデータベース (RDB)</a>
<ul>
<li><a href="#rdbの基礎" id="toc-rdbの基礎"><span class="toc-section-number">6.1</span>
RDBの基礎</a></li>
<li><a href="#演習" id="toc-演習"><span class="toc-section-number">6.2</span> 演習</a></li>
<li><a href="#主要なrdbms" id="toc-主要なrdbms"><span class="toc-section-number">6.3</span>
主要なRDBMS</a></li>
</ul></li>
<li><a href="#postgresql-の-環境構築-準備" id="toc-postgresql-の-環境構築-準備"><span
class="toc-section-number">7</span> PostgreSQL の 環境構築 (準備)</a>
<ul>
<li><a href="#docker-desktop-のインストール" id="toc-docker-desktop-のインストール"><span
class="toc-section-number">7.1</span> Docker Desktop のインストール</a></li>
<li><a href="#docker-desktop-の動作確認" id="toc-docker-desktop-の動作確認"><span
class="toc-section-number">7.2</span> Docker Desktop の動作確認</a></li>
<li><a href="#hello-world-コンテナの起動確認" id="toc-hello-world-コンテナの起動確認"><span
class="toc-section-number">7.3</span> Hello World コンテナの起動確認</a></li>
<li><a href="#宿題-postgresql-と-dbgate-のイメージのプル-ダウンロード"
id="toc-宿題-postgresql-と-dbgate-のイメージのプル-ダウンロード"><span
class="toc-section-number">7.4</span> 宿題: PostgreSQL と DbGate のイメージのプル
(ダウンロード)</a></li>
</ul></li>
<li><a href="#授業時間外学習の指示-宿題" id="toc-授業時間外学習の指示-宿題"><span
class="toc-section-number">8</span> 授業時間外学習の指示 (宿題)</a></li>
</ul> 
        <!-- ---------------------------------------- -->
      </div>
    </nav>

    <header class="markdown-body">
      <p>2025-4I データベース工学 第01回 講義資料</p>
      <p>毎週木曜日 3-4時限</p>
    </header>

    <main class="markdown-body">
      <!-- ---------------------------------------- -->
      <h1 data-number="1" id="ガイダンス"><span class="header-section-number">1</span>
      ガイダンス</h1>
      <h2 data-number="1.1" id="概要"><span class="header-section-number">1.1</span> 概要</h2>
      <p>本科目では、「<strong>リレーショナルデータベース</strong>」について、その概念から保守運用に至るまでを体系的に学んでいきます。具体的には、<strong>環境構築</strong>
      (Docker での PostgreSQL コンテナ構築)、<strong>設計</strong>
      (概念設計・論理設計)、<strong>操作</strong> (Raw SQL/ORM)、<strong>保守運用</strong>
      について、ハンズオン形式で (＝実際に手を動かしながら)
      学んでいきます。また、「<strong>ドキュメント指向データベース</strong>」についても、基本概念や環境構築、操作などの概要を学んでいきます。</p>
      <ul>
      <li>リレーショナルデータについては <a href="https://www.postgresql.org/">PostgreSQL</a>
      を使用します。
      <ul>
      <li>Programming3 で利用した <a href="https://supabase.com/">Supabase</a> も PostgreSQL
      を基盤としています。</li>
      </ul></li>
      <li>ドキュメント指向データベースについては <a href="https://www.mongodb.com/">MongoDB</a>
      を使用します。</li>
      </ul>
      <p>具体的には、次のような「知識・理解」および「実践的スキル」を習得することを目指していきます。</p>
      <ol type="1">
      <li>データの永続化や管理における <strong>データベースマネジメントシステム (DBMS)</strong>
      の位置付けと、その導入効果を説明できる。</li>
      <li>主要なデータベースモデル（リレーショナル／ドキュメント指向など）の特性を理解し、要件に応じた適切な選択ができる。</li>
      <li><strong>Docker を使用して PostgreSQL の実行環境を構築</strong>し、コンソール や DbGate
      (ウェブベースのデータベースクライアント) から接続して、SQL や ユーティリティコマンド
      を実行できる。</li>
      <li>現実世界の要件を分析し、<strong>ER図を用いた概念設計</strong>ができる。</li>
      <li>リレーショナルモデルについて、<strong>正規化や外部キー制約制約、インデックス設計などの論理設計</strong>ができる。</li>
      <li><strong>SQL</strong>
      を用いてリレーショナルデータベースに対する各種クエリが実行できる。</li>
      <li>TypeScriptから<a href="https://www.npmjs.com/package/pg">pg</a>(DBドライバ) や、<a
      href="https://www.npmjs.com/package/prisma">Prisma</a>(ORM) による PostgreSQL
      の利用ができる。</li>
      <li>PostgreSQL
      のユーティリティを用いて、データベースのバックアップ／リストア、実行計画の表示などができる。</li>
      <li>Docker を使用して MongoDB の実行環境を構築ができる。</li>
      <li>TypeScript から MongoDB に接続して基本的な CRUD 操作ができる。</li>
      </ol>
      <h2 data-number="1.2" id="授業の位置づけ"><span class="header-section-number">1.2</span>
      授業の位置づけ</h2>
      <p>この授業は、次のような位置付けになります。</p>
      <h3 data-number="1.2.1" id="基本情報"><span class="header-section-number">1.2.1</span>
      基本情報</h3>
      <ul>
      <li>学年・学科： 4年 総合工学システム学科 <strong><em>知能情報コース</em></strong>
      の基盤専門科目</li>
      <li>単位数： <strong>2単位</strong> (後期・<strong>学修単位</strong>)</li>
      <li>卒業要件との対応： DP-D
      <ul>
      <li>自己の基盤となる専門分野について実践的な知識と技術を修得し、工学的諸問題に適用する能力</li>
      </ul></li>
      <li>担当教員： Takeshi Wada (知能情報コース)</li>
      </ul>
      <div class="note type-senior">
      <p><strong>学修単位</strong></p>
      <p>本科目は「プログラミング3」や「アルゴリズムとデータ構造2」と同じく「<strong>学修単位</strong>」の科目であり「<strong>30時間
      (相当) の対面授業</strong>」と「<strong>60時間 (相当)
      の授業時間外学習</strong>」を前提とした内容 (ボリュームと学習難易度) の科目となります。</p>
      <p>授業については <strong>毎週90分</strong>
      を実施し、これを2時間と見なして全15回の講義によって「30時間相当の対面授業」を確保しています。これに加えて、皆さんには<strong>授業1回につき、授業時間外に</strong>
      <span class="masked">4時間相当の自主的な学習 (復習や演習、発展的探求)</span>
      <strong>が求められています</strong>。</p>
      </div>
      <h3 data-number="1.2.2" id="関連科目"><span class="header-section-number">1.2.2</span>
      関連科目</h3>
      <ul>
      <li><p>2年 前期 (学修単位)「<strong>情報2</strong>」 - 教科書「キタミ式
      ITパスポート」の「Chapter7 データベース」pp.160-191。</p>
      <ul>
      <li>第10回と第11回の講義で「<strong>リレーショナルデータベースの基礎</strong>」について学習済み。
      <ul>
      <li>教科書「キタミ式 ITパスポート」の「Chapter7 データベース」pp.160-191。</li>
      <li>情報2 <a
      href="https://omunet.sharepoint.com/:b:/s/S__2025_ybfc0r/EXzsVwn4VrJMj1KMknK9vy0BJTDyP2MypAxQjp7-lRlb2g?e=atkHP3">第10回/第11回の講義資料PDF</a>(学内のみ)</li>
      <li>SQLite3 を使用した SQL の基礎演習
      (テーブルの作成、レコードの挿入、SELECT、正規化、結合)。</li>
      </ul></li>
      </ul></li>
      <li><p>2年 通年 (履修単位)「<strong>プログラミング1</strong>」(Python)</p>
      <ul>
      <li><a
      href="https://takeshiwada1980.github.io/Programming1-2023/lecture11.html#sqliteとの連携">Python
      と Sqlite3 の連携</a></li>
      </ul></li>
      <li><p>3年 後期
      (学修単位)「<strong>プログラミング3</strong>」(TypeScript/Next.js/Supabase)</p>
      <ul>
      <li><a
      href="https://takeshiwada1980.github.io/Programming3-2024/lecture08.html#データの永続化">ウェブアプリのデータの永続化</a></li>
      <li>Prisma (TypeSCript ORM) + Supabse (PostgreSQL)</li>
      </ul></li>
      <li><p>3年 後期「<strong>知能情報実験実習1</strong>」</p>
      <ul>
      <li>サーバ構築 (Linux, Apache)、Docker</li>
      </ul></li>
      <li><p>4年 前期「<strong>知能情報実験実習2</strong>」</p>
      <ul>
      <li>SQLAlchemy (Python ORM) + SqLite3</li>
      <li>Prisma (TypeSCript ORM) + SqLite3</li>
      </ul></li>
      </ul>
      <p>以上のように、これまで皆さんは様々な科目を通して多くの知識や技術を学んできました。しかし、<strong>それらを独立した「点」と「点」で持っているままでは、卒業研究や仕事の場で求められる実力にはなりません</strong>。自分自身で能動的かつ探求的に「点」と「点」を結びつけ、「線」や「面」に広げてこそ、はじめて本当の価値が生まれます。<strong>他の人が持っていない「線」や「面」を築けるかどうかが、自分の強み
      (＝自分にしかできないこと) となっていきます</strong>。</p>
      <p>本科目の受講においても、これまでに培ってきた知識や技術と、新たに学ぶ内容を<span
      class="masked">「どのように結びつけることができるのか？」</span>
      を強く意識し、取り組んでください。</p>
      <hr />
      <p>この他、データベース (特にリレーショナルデータベース)
      は「<strong>ITパスポート試験</strong>」「<strong>基本情報技術者試験</strong>」「<strong>応用情報技術者試験</strong>」などの資格試験でも重要分野となっています。</p>
      <ul>
      <li><a href="https://www3.jitec.ipa.go.jp/JitesCbt/">ITパスポート試験</a> CBT形式</li>
      <li><a href="https://www.ipa.go.jp/shiken/kubun/fe.html">基本情報技術者試験</a> CBT形式</li>
      <li><a href="https://www.ipa.go.jp/shiken/kubun/ap.html">応用情報技術者試験</a>
      2026年度からCBT形式に移行予定</li>
      </ul>
      <p>これらはいずれも国家資格です。実践的な開発力とは直結しないものの <span
      class="masked">就職活動を含めたIT業界におけるキャリア形成</span>
      では一定の意義を持つので取得をお勧めします。</p>
      <h3 data-number="1.2.3" id="教科書と参考書"><span class="header-section-number">1.2.3</span>
      教科書と参考書</h3>
      <ul>
      <li>教科書「<strong>達人に学ぶDB設計 徹底指南書
      (第2版)</strong>」は、授業および授業時間外学習で適宜使用します。</li>
      <li>参考書
      <ul>
      <li><a href="https://www.amazon.co.jp/dp/4297146738/">改訂第4版 すらすらと手が動くようになる
      SQL書き方ドリル</a></li>
      <li><a
      href="https://www.amazon.co.jp/dp/4296001973/">データベースをなぜつくるのか　知っておきたいE-R図とSQLの基礎</a></li>
      <li><a href="https://www.amazon.co.jp/dp/4297104083/">失敗から学ぶRDBの正しい歩き方</a></li>
      </ul></li>
      </ul>
      <h2 data-number="1.3" id="成績評価法と履修条の注意"><span
      class="header-section-number">1.3</span> 成績評価法と履修条の注意</h2>
      <p><strong>総合成績</strong>（年度末の最終成績）は、シラバス記載のように「試験<strong>45%</strong>、小テスト<strong>35%</strong>、課題<strong>20%</strong>の割合で総合して評価」します。</p>
      <ul>
      <li>小テストおよび課題は、主として「授業時間外学習の取り組み」を評価するものとなります。</li>
      <li>小テスト実施するときは、その前回講義でアナウンスします。</li>
      </ul>
      <div class="note type-tips">
      <p><strong>各種事情で小テストを受験できなかったときは</strong></p>
      <p>遅刻や欠席（公欠や出欠停止を含む）により、授業中に実施する「小テスト」を受験できず追試験を希望するときは、当該授業日を含めて2日以内に、自分から担当教員宛に
      Teams Chat で「追試験の実施依頼」を申し出てください。例えば、10月9日 (木)
      実施の小テストの追受験を希望する場合は、遅くとも 10日 (金) 23:59 までに連絡してください。</p>
      <ul>
      <li>小テストの追試験は、公欠や出席停止を含めて理由に関わらず「<strong>1人あたり最大3回まで</strong>」対応します。</li>
      <li>電子メールや口頭など、Teams Chat 以外による依頼には対応しません。</li>
      <li>実施依頼には、具体的な希望の日時 (平日 08:40-19:00 を原則) を3案ほど添えてください。
      <ul>
      <li>「放課後」や「先生の空いている時間」のような抽象表現は使用しないでください。</li>
      </ul></li>
      </ul>
      </div>
      <h3 data-number="1.3.1" id="履修上の注意点"><span class="header-section-number">1.3.1</span>
      履修上の注意点</h3>
      <ul>
      <li>毎回、十分に充電したノートPCを持参してください。</li>
      <li>授業や課題の取り組みにおいて、生成AIの利用に制限はありませんが、これらは「<strong>理解を深めるため</strong>」「<strong>知識の幅を広げるため</strong>」に利用してください。「正答を得るため」や「自分では記述できないクエリ
      (SQL) を書かせるため」に利用することは推奨しません。
      <ul>
      <li>推奨する利用方法は、講義資料のなかに <strong>(プロンプト例)</strong>
      として示しています。</li>
      </ul></li>
      <li>ウェブの技術記事やYouTube動画、生成AIを活用し、授業で扱った内容に関する補足的な知識や、最近の技術動向についてキャッチアップに努めてください。</li>
      </ul>
      <h1 data-number="2" id="データベースとは"><span class="header-section-number">2</span>
      データベースとは</h1>
      <p>データベース (Database) とは、<strong>データ (data)</strong> と <strong>ベース
      (base)</strong>
      を合わせた複合語になります。データは「<strong>記録された情報</strong>」や「<strong>観測事実</strong>」を意味し、ベースは「<strong>基盤</strong>」「<strong>置き場</strong>」「<strong>土台</strong>」を意味します。また、ベースは軍事用語として
      <span class="masked">「基地」や「補給拠点」</span>
      といった意味合いも持っています。このことから、データベースはもともと「情報の基盤」や「知識やデータの倉庫」のような比喩的イメージを持つ言葉となっています。</p>
      <p><strong>非情報分野</strong>において、一般的に「データベース」という言葉は <span
      class="masked">「一定の形式や構造に従って整理されたデータの集まり」</span>
      を指します。その意味では、電話帳や国語辞典、出席簿といったアナログ資料もデータベースとみなせますし、CSV
      や JSON などのデジタルファイルもデータベースと呼ぶことができます。</p>
      <p>しかし、<strong>コンピュータサイエンスやソフトウェア開発の分野</strong>では <span
      class="masked">CSV や JSON のような単なるデータファイル</span>
      を「データベース」と呼ぶことは通常ありません。これらの分野でデータベースという言葉は「<strong>一定の形式や構造に従ってデータを蓄積・管理し、必要に応じて検索・更新・削除・集計・加工などを柔軟かつ高速に行える仕組み</strong>」を指すことが一般的です。ただし、文脈によっては、データそのものを「<strong>データベース
      (DB)</strong>」と呼び、それらを管理する仕組みやソフトウェアを「<strong>データベースマネジメントシステム
      (DBMS)</strong>」と区別して呼ぶこともあります。</p>
      <p>まとめると、以下のようになります。</p>
      <ul>
      <li>CSV や JSON、Excel などのファイルや、それらの集まりをデータベースとは言わない。
      <ul>
      <li>単なる CSV
      の読み書き処理を「データベースから情報を取得して」のように表現すると大きな誤解を与えるので十分に注意すること。</li>
      </ul></li>
      <li>データの蓄積・管理、柔軟な操作を可能にする仕組みやソフトウェアのことを「データベース」あるいは「データベースマネジメントシステム」と呼ぶ。
      <ul>
      <li>データベースマネジメントシステムには、ユーザごとのアクセス制御、ネットワーク経由での利用、データ整合性の維持、障害時復旧といった機能が標準的に備わっている。</li>
      <li>データベース管理システムと呼ぶこともある。</li>
      </ul></li>
      <li>データベースは「<strong>DB</strong>」、データベースマネジメントシステムは「<strong>DBMS</strong>」という略語で使用される。
      <ul>
      <li>DB について「デービー」という読み方も比較的広く使われている。</li>
      </ul></li>
      </ul>
      <div class="note type-tips">
      <p><strong>実際の開発現場における「データベース」という言葉の使われ方</strong></p>
      <p>ややこしいですが、ソフトウェア開発の文脈で「データベース」という用語が使われる場合、以下のように「データそのもの」ではなく、それを「管理・利用する仕組みやソフトウェアを含めた全体」を指すことが一般的です。</p>
      <ul>
      <li>「この機能では、ユーザーの行動ログをデータベースに保存する必要がありますね」</li>
      <li>「データベースのスキーマ設計はどうしますか？正規化は第3正規形まででよいでしょうか」</li>
      <li>「データベースの応答が遅くなっています💦クエリのパフォーマンスを確認してください」</li>
      <li>「データベースの容量が90%を超えました。ディスク拡張が必要です」</li>
      <li>「来週末にデータベースのバージョンアップを予定しています」</li>
      <li>「データベースのセキュリティパッチを適用する必要があります」</li>
      <li>「性能要件：データベースの応答時間は平均100ms以下であること」</li>
      <li>「データベースの冗長化により、システムの可用性を99.9%以上確保できます」</li>
      </ul>
      <p>このあたりの使い分けは、本科目を学んでいくうちに自然につかめるようになると思います。</p>
      </div>
      <h3 data-number="2.0.1" id="定着確認"><span class="header-section-number">2.0.1</span>
      定着確認</h3>
      <ul>
      <li>DBMS とは何の略語か英語で答えよ。
      <ul>
      <li><strong>答え</strong>: <span class="masked">Database Management System</span></li>
      </ul></li>
      <li>次の説明は「適切である」か「適切ではない」か答えよ。
      <ul>
      <li><strong>答え</strong>: <span class="masked">適切ではない</span></li>
      </ul></li>
      </ul>
      <blockquote>
      <p>ソフトウェア開発やコンピュータサイエンスの分野では、一般に CSVファイル や JSONファイル
      などのデータファイルの集合を「データベース」という。</p>
      </blockquote>
      <ul>
      <li>DBMSが標準的に備えている機能として「適切ではないもの」はどれか。該当するものを全て答えよ。
      <ul>
      <li>❶ ユーザーごとのアクセス制御</li>
      <li>❷ ネットワーク経由での利用</li>
      <li>❸ データ整合性の維持</li>
      <li>❹ プログラムの自動作成</li>
      <li>❺ 障害時復旧</li>
      <li>❻ ウイルス対策
      <ul>
      <li><strong>答え</strong>: <span class="masked">❹❻</span></li>
      </ul></li>
      </ul></li>
      <li>一般に「DBMSとは言えないもの」はどれか。該当するものを全て答えよ。
      <ul>
      <li>❶ SQLite3</li>
      <li>❷ PostgreSQL</li>
      <li>❸ Oracle Database</li>
      <li>❹ Microsoft Excel</li>
      <li>❺ Microsoft Access</li>
      <li>❻ SQLAlchemy</li>
      <li>➐ Pandas</li>
      <li>❽ Prisma
      <ul>
      <li><strong>答え</strong>: <span class="masked">❹❻➐❽</span></li>
      </ul></li>
      </ul></li>
      <li>開発現場において「データベースのバージョンアップ」という表現が指しているものはどれか。最も適切なものを答えよ。
      <ul>
      <li>❶ データを最新情報に更新すること</li>
      <li>❷ DBMSソフトウェアを新しいバージョンに更新すること</li>
      <li>❸ ファイル形式を変更すること</li>
      <li>❹ データの量を増やすこと
      <ul>
      <li><strong>答え</strong>: <span class="masked">❷</span></li>
      </ul></li>
      </ul></li>
      </ul>
      <h1 data-number="3" id="なぜdbms-が利用されるのか"><span
      class="header-section-number">3</span> なぜ、DBMS が利用されるのか？</h1>
      <p>現在、企業の基幹システム
      (会計システム、人事システム、販売管理システムなど)や、ECサイトなどのウェブサービスのような「<strong>複数のユーザやプログラムによって共有・利用されるシステム</strong>」においては、ほぼ例外なく
      <strong>DBMS</strong> が利用されています。</p>
      <p>ここでは「<strong>なぜ、データ管理に、OSのファイルシステムではなく、DBMSが使われているのか？</strong>」について整理していきます。視点を変えれば、<strong>CSVやJSONなどのデータファイルを用いたデータ管理には、どんな制約や問題、リスクがあるのか？</strong>
      について考えていきます。</p>
      <h2 data-number="3.1" id="データの永続化"><span class="header-section-number">3.1</span>
      データの永続化</h2>
      <p>一般にプログラムでは「<strong>ユーザが入力した情報</strong>」や「<strong>システムが動的に生成した情報</strong>
      (＝例えば <span class="masked">「最終ログイン日時」や「一時的な計算結果」</span>
      など)」は、変数 (メモリ)
      に保持されますが、<strong>これらはプログラムの実行終了とともに失われてしまいます</strong>。</p>
      <div class="sourceCode" id="cb1"
      data-caption="変数に格納された情報はプロセスの終了とともに失われてしまう"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Python</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>name <span class="op">=</span> <span class="bu">input</span>(<span class="st">&quot;あなたの名前を入力してください: &quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="bu">print</span>(<span class="ss">f&quot;こんにちは、</span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">さん！&quot;</span>)</span></code></pre></div>
      <p>プログラムの終了後も、これらの情報 (上記の例で言えば <code>name</code> の値)
      を保持して、プログラムを再び起動したときに引き続き利用できるようにするためには「<strong>データの永続化</strong>」という仕組みが必要となります。</p>
      <h2 data-number="3.2" id="osのファイルシステムを直接利用したデータの永続化の問題"><span
      class="header-section-number">3.2</span>
      OSのファイルシステムを直接利用したデータの永続化の問題</h2>
      <p>最も基本的な「データの永続化」の方法は、OSのファイルシステムを利用して
      <strong>テキストファイル</strong> (TXT、CSV、JSONなど) や <strong>バイナリファイル</strong>
      にデータ (情報) を書き出し、必要に応じて読み出すというものです。</p>
      <p>例えば、Python では標準ライブラリの <code>csv</code> や、外部ライブラリの
      <code>Pandas</code>
      で「CSVファイルの読み書き」ができるので、それを利用してデータの永続化が可能です。また、標準ライブラリの
      <code>json</code> を用いれば JSONファイルの読み書きができ、<code>pickle</code> を用いれば
      Pythonオブジェクトを「バイナリ形式」で保存・復元できるので、これらも永続化の手段となります。</p>
      <ul>
      <li>参考:<a
      href="https://takeshiwada1980.github.io/Programming1-2024/lecture18.html#json形式のシリアライズとデシリアライズ">PG1-第18回講義</a></li>
      <li>参考:<a
      href="https://takeshiwada1980.github.io/Programming1-2024/lecture25.html#自動セーブとロード機能の追加">PG1-第25回講義</a></li>
      </ul>
      <p>このように「<strong>OSのファイルシステムを直接利用したデータの永続化</strong>」は、比較的実装が容易で、プログラムに組み込みやすく便利な方法です。ただし、この方法には様々な問題や制約があり、<span
      class="masked">実際には、限定的なケースでのみ安全かつ効率的な手法となります</span>。</p>
      <p>以下では、<strong>CSV や JSON
      などのデータファイルを使ったデータ管理で起き得る問題や制約</strong>、それにともなう「<strong>リスク</strong>」について探っていきます。</p>
      <h3 data-number="3.2.1" id="定着確認-1"><span class="header-section-number">3.2.1</span>
      定着確認</h3>
      <ul>
      <li>JSON とは何の略語か英語で答えよ。
      <ul>
      <li><strong>答え</strong>: <span class="masked">JavaScript Object Notation</span></li>
      </ul></li>
      <li>CSV とは何の略語か英語で答えよ。
      <ul>
      <li><strong>答え</strong>: <span class="masked">Comma Separated Values</span></li>
      </ul></li>
      </ul>
      <h2 data-number="3.3" id="汎用性や拡張性に関する問題や制約"><span
      class="header-section-number">3.3</span> 汎用性や拡張性に関する問題や制約</h2>
      <p>当該のデータファイル (例えば <code>学生情報.csv</code> など)
      が、<strong>単一のアプリだけで利用される場合</strong>、その汎用性や拡張性に関する問題はあまり大きなものとはなりません。しかし、将来的な利用も含めて<strong>複数のアプリでデータファイルを「共用」する場合</strong>には、様々な制約や問題が起きてきます。</p>
      <p>一般に、複数のアプリからの利用を前提にしつつ、将来の拡張や汎用性、さらには読み書きのパフォーマンスまで考慮した「データファイル
      (フォーマットやスキーマ)」および「その入出力処理 (I/O処理)」を
      <strong>設計・実装することは非常に難しく大変な作業</strong> となります。</p>
      <p>例えば、「アプリA」に関する要件としてデータファイルに新しい情報を追加しなければならない場合、そのデータファイルを共用する「アプリB」や「アプリC」、さらには
      <span
      class="masked">将来的に開発されるであろう「アプリD」に対する影響まで考慮して対応する必要</span>
      があります。これらを想定して、十分な汎用性と拡張性を持ったデータファイルの設計と、そのI/O処理の実装は非常に難しいものとなります。</p>
      <ul>
      <li>具体例:「<strong>成績管理.exe</strong>」「<strong>出席管理.exe</strong>」「<strong>授業料支払管理.exe</strong>」で「<strong>学生情報.csv</strong>」を共通利用しているとします。このとき「<strong>成績管理.exe</strong>」の都合で「期末試験
      (追試験)
      の成績」という列を単純に追加すると、「<strong>出席管理.exe</strong>」や「<strong>授業料支払管理.exe</strong>」でのパフォーマンスの悪化や、形式変更による予期せぬエラーが発生する可能性があります。</li>
      </ul>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>データファイル設計における「フォーマット」と「スキーマ」の違いについて解説してください。</p>
      </blockquote>
      <h3 data-number="3.3.1" id="定着確認-2"><span class="header-section-number">3.3.1</span>
      定着確認</h3>
      <ul>
      <li>I/O とは何の略語か英語で答えよ。
      <ul>
      <li><strong>答え</strong>: <span class="masked">Input/Output</span></li>
      </ul></li>
      </ul>
      <h2 data-number="3.4" id="同時アクセスと排他制御に関する問題や制約"><span
      class="header-section-number">3.4</span> 同時アクセスと排他制御に関する問題や制約</h2>
      <p>当該データファイルが、<strong>単一のアプリかつ単一ユーザ</strong>から利用される前提で、さらに<strong>アプリの多重起動が想定されない</strong>とき、そのアプリが正しくファイルを扱っていれば「<strong>更新競合</strong>」や「<strong>データの不整合（論理的な矛盾）</strong>」が生じることはありません。</p>
      <p>しかし、複数のアプリや複数のユーザでデータファイルを共用し、同時アクセスして読み書きができる場合では、それらの問題が現実的に発生し、<strong>システムの信頼性に深刻な影響</strong>を与えることになります。</p>
      <p>具体例として、次のようなデータファイル <code>学生情報.csv</code> を考えてみます。</p>
      <div class="sourceCode" id="cb2" data-caption="学生情報.csv (11:39時点)"><pre
      class="sourceCode numberSource csv numberLines"><code class="sourceCode"><span id="cb2-1"><a href="#cb2-1"></a>学籍番号,氏名,住所,...,DB工学の成績,...</span>
<span id="cb2-2"><a href="#cb2-2"></a>X002,構文 誤次郎,整合市破綻町1-1,...,70,...</span>
<span id="cb2-3"><a href="#cb2-3"></a>X003,仕様 曖昧子,無効市矛盾町9-9,...,65,...</span>
<span id="cb2-4"><a href="#cb2-4"></a>X004,保守 絶望太,排他市待機村7-5,...,80,...</span></code></pre></div>
      <p>このとき、この <code>学生情報.csv</code>
      を共用している「<strong>授業料支払管理.exe</strong>
      (教員A👩‍🦰が使用)」と「<strong>成績管理.exe</strong>
      (教員B👨が使用)」で、次のような操作・処理が実行されたとします。</p>
      <ul>
      <li><strong>〔11時39分〕</strong> 教員A👩‍🦰が「<strong>授業料支払管理.exe</strong>」を起動
      (アプリは <code>学生情報.csv</code> の内容をメモリに読み込む)。教員A👩‍🦰は、アプリ画面上で
      <code>構文 誤次郎</code> の <strong>住所</strong> を <code>整合市破綻町1-1</code> から
      <code>正規市ヌル町9-1-1</code> に変更。ここで電話があって、作業を一時中断。
      <ul>
      <li>アプリ画面上のテキストボックスで値を変更しただけで、まだ保存の確定処理はしていない。</li>
      </ul></li>
      <li><strong>〔11時40分〕</strong> 教員B👨が「<strong>成績管理.exe</strong>」を起動 (アプリは
      <code>学生情報.csv</code> の内容をメモリに読み込む)。教員B👨は、<code>仕様 曖昧子</code> の
      <strong>DB工学の成績</strong> を <code>65</code> から <code>55</code>
      に変更。さらに「確定」ボタンを押下。
      <ul>
      <li><strong>成績管理.exe</strong> は、メモリの内容を <code>学生情報.csv</code>
      に書き出す。</li>
      </ul></li>
      <li><strong>〔11時45分〕</strong>
      教員A👩‍🦰が電話対応を終えて、アプリ画面で「確定」ボタンを押下。
      <ul>
      <li><strong>授業料支払管理.exe</strong> は、メモリの内容を <code>学生情報.csv</code>
      に書き出す。</li>
      </ul></li>
      </ul>
      <p>この結果、最終的にデータファイル <code>学生情報.csv</code> は次のような内容になります。</p>
      <div class="sourceCode" id="cb3" data-caption="学生情報.csv (11:46時点)"><pre
      class="sourceCode numberSource csv numberLines"><code class="sourceCode"><span id="cb3-1"><a href="#cb3-1"></a>学籍番号,氏名,住所,...,DB工学の成績,...</span>
<span id="cb3-2"><a href="#cb3-2"></a>X002,構文 誤次郎,正規市ヌル町9-1-1,...,70,...</span>
<span id="cb3-3"><a href="#cb3-3"></a>X003,仕様 曖昧子,無効市矛盾町9-9,...,65,...</span>
<span id="cb3-4"><a href="#cb3-4"></a>X004,保守 絶望太,排他市待機村7-5,...,80,...</span></code></pre></div>
      <p>ここでは、教員B👨による<strong>成績変更</strong> (<code>65</code>👉<code>55</code>)
      <strong>が消失する</strong>という深刻な問題が生じています。これは <strong>更新競合 (Lost
      Update)</strong>
      と呼ばれ、ファイルの共用でデータ管理したときに起き得る<strong>典型的なリスク</strong>として知られています。</p>
      <p>このような問題の回避のために、通常、OS のファイルシステムには <strong>排他制御 (Shared Lock
      や Exclusive Lock)</strong>
      という仕組みが用意されています。この仕組みを利用すれば、<strong>任意のファイルを一度に操作できるアプリ
      (プロセス) を1つに限定し、更新競合を防ぐこと</strong> ができます。</p>
      <p>しかし、OS
      のファイルシステムによるロックは基本的には「<strong>ファイル単位</strong>」で働きます。そのため「教員A👩‍🦰」が
      <code>学生情報.csv</code> にロックをかけると、それが解除されるまでは、他の教員やアプリ
      (<strong>成績管理.exe</strong> や <strong>出席管理.exe</strong> など) からは
      <code>学生情報.csv</code>
      が更新できなくなり、システムの実用性を大きく損なうことになってしまいます。</p>
      <ul>
      <li>教員A👩‍🦰が、ロックをかけたまま昼休みに入ってしまったりすると、業務に大きな影響がでてしまいます。</li>
      </ul>
      <div class="note type-senior">
      <p><strong>バイト単位のファイルロック</strong></p>
      <p>Windows や Linux、MacOS などの OS では、ファイル単位に加えて
      <strong>バイト単位のファイルロック機能</strong>
      も提供しています。こちらを利用すれば、<strong>ファイル内の特定範囲にロックをかけることが可能</strong>となります。しかし、その利用には以下のような大きな制約や難しさがあります。</p>
      <ul>
      <li><strong>OS依存性の問題</strong>: 各 OS で異なるAPI (Windows:
      <code>LockFileEx</code>、Linux/macOS: <code>fcntl</code> の <code>F_SETLK</code> など)
      を使用する必要があり、クロスプラットフォーム開発が困難になります。</li>
      <li><strong>動的変化への対応不可</strong>:
      CSVファイルでデータの挿入・削除が発生すると、すべてのバイト位置が変化してしまいます。例えば、ファイル先頭に1行挿入しただけで、後続のすべてのロック範囲が無効になってしまいます。</li>
      <li><strong>実装の複雑性</strong>:
      バイト位置の計算、ロック範囲の管理、例外処理など、極めて高度で複雑な処理が要求されます。さらに、文字エンコーディング
      (UTF-8、Shift_JIS等) によってバイト数が変わるため、正確な位置計算がより困難になります。</li>
      <li><strong>パフォーマンスの劣化</strong>:
      細かなロック管理により、ファイル操作のオーバーヘッドが大幅に増加し、システム全体のパフォーマンスが低下します。</li>
      </ul>
      <p>以上のような理由から、実際のアプリ開発において「バイト単位のファイルロック」が採用されることはほとんどありません。</p>
      </div>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>OSのファイルシステムにおける「排他制御」とは、どのような機能ですか。</p>
      </blockquote>
      <blockquote>
      <p>OSのファイルシステムの「Shared Lock」と「Exclusive Lock」の違いについて教えてください。</p>
      </blockquote>
      <blockquote>
      <p>Windows 環境の Python でテキストファイルに対する排他制御 (排他ロック)
      をしたいです。どのようにすればよいですか。</p>
      </blockquote>
      <h3 data-number="3.4.1" id="定着確認-3"><span class="header-section-number">3.4.1</span>
      定着確認</h3>
      <ul>
      <li>サーバの設定ファイルに対して「管理者X」が編集を加えて保存した。その後、同じ設定ファイルを古い状態のまま開いていた「管理者Y」が編集して保存した結果、「管理者X」が追加した内容が反映されずに消失してしまった。この現象を何と呼ぶか答えよ。
      <ul>
      <li><strong>答え</strong>: <span class="masked">更新競合 (Lost Update)</span></li>
      </ul></li>
      </ul>
      <h2 data-number="3.5" id="セキュリティとアクセス制御に関する問題や制約"><span
      class="header-section-number">3.5</span> セキュリティとアクセス制御に関する問題や制約</h2>
      <p>OS のファイルシステムを直接利用したデータ管理において、アクセス権 (パーミッション)
      の設定は「ファイル」や「フォルダ」という単位でしか設定することができません。</p>
      <p>たとえば、ユーザが「<strong>成績処理.exe</strong>」を通じて <code>学生情報.csv</code>
      を操作可能なとき、そのユーザは同じ権限でテキストエディタやExcelから <code>学生情報.csv</code>
      を編集したり、ファイルごと削除したりすることが可能になります。逆に、テキストエディタで編集できないように
      <code>学生情報.csv</code>
      にアクセス制限をかけると、そのユーザの権限で起動した「<strong>成績処理.exe</strong>」からもファイルに書込みができなくなってしまいます。また、Windows、Linux、macOS
      など一般的な OS
      では、ファイル内部の特定の範囲だけにアクセス権を設定する仕組みは用意されていないので、部分的な読み取りや、書き込み制限をすることもできません。</p>
      <p>このように、ファイルシステムを直接利用したデータ管理には、セキュリティやアクセス制御で大きな制約が生じます。</p>
      <ul>
      <li>具体例:
      「論理回路2」の授業担当である「教員C👨‍🦳」は、本来「論理回路2の成績」の列のみに書き込み権限を持つべきです。しかし、ファイルシステムでは
      <code>学生情報.csv</code>
      全体に対する読み書き権限を与えるしかありません。仮に「<strong>成績管理.exe</strong>」で「論理回路2の成績だけ編集可能」のような制限を実装しても、その制御はアプリを通した場合にしか有効ではありません。「教員C👨‍🦳」がテキストエディタで直接
      <code>学生情報.csv</code> を開いてしまえば、他の科目の成績を改ざんすることも (技術的には)
      できてしまいます。</li>
      </ul>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>Windowsのファイルシステム (NTFS) で設定可能なパーミッションについて教えてください。</p>
      </blockquote>
      <blockquote>
      <p>Linuxのファイルシステムで設定可能なパーミッションについて教えてください。</p>
      </blockquote>
      <h2 data-number="3.6" id="ネットワーク経由のアクセスに関する問題や制約"><span
      class="header-section-number">3.6</span> ネットワーク経由のアクセスに関する問題や制約</h2>
      <p>CSV や JSON などのデータファイルを <strong>共有フォルダ</strong> や <strong>NAS</strong>
      (Network Attached
      Storage)、クラウドストレージなどに配置することで、複数のユーザや端末からネットワーク経由でデータファイルを共用することができます。しかし、既に述べたように、更新競合が発生するリスクはそのまま残り、また、ファイルシステムのアクセス権限の設定は依然として「ファイル単位」となるため、ユーザごとに「ファイルのなかの特定の範囲だけを編集可」といった細かい制御はできません。</p>
      <p>無論、データファイルへのアクセスを自前のサーバアプリで受け付ける仕組みを構築すれば、より細かいセキュリティ制御や排他制御を実現することはできます。しかし、その場合、認証や通信暗号化、ログ監査なども含めてセキュリティを意識したシステムの設計と実装が必要となり、現実的ではありません。</p>
      <div class="note type-tips">
      <p><strong>ファイルを分割しても解決しない問題</strong></p>
      <p>ファイルによるデータ管理において、細かな粒度で排他制御やアクセス権の設定を行いたい場合、<strong>データを複数のファイルに分割して保存する</strong>
      という戦略があります。例えば、科目ごとにファイルを分けて「2025年度のDB工学の成績.json」「2025年度の論理回路2の成績.json」といった形で管理する、といったやり方です。このようにすれば、影響範囲を最小に留めたロックや、細かなアクセス権の設定が可能になります。</p>
      <p>しかし、この戦略をとった場合、検索や集計の際には複数ファイルを横断して読み込み処理が必要があり、パフォーマンスが著しく低下するという欠点があります。一般に「1KBのファイルを1000個読み込む場合」と「1MBのファイルを1個読み込む場合」を比較すると、前者の方が圧倒的に負荷が高く、処理に大きな時間がかかるようになります。</p>
      </div>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>一般なOSのファイルシステムでは「1KBのファイルを1000個読み込む場合」と「1MBのファイルを1個読み込む場合」では、前者の方が圧倒的に負荷が高く時間を要しますが、これは何故ですか。また、例外
      (逆転するケース) はありますか？</p>
      </blockquote>
      <h2 data-number="3.7" id="データサイズやパフォーマンスに関する問題や制約"><span
      class="header-section-number">3.7</span> データサイズやパフォーマンスに関する問題や制約</h2>
      <p>ファイルシステムを直接利用したデータ管理では、データサイズが大きくなるにつれて深刻な制約に直面します。一般に、ファイル編集をする場合、アプリでは、ファイル全体をメモリに読み込む必要があり、この際、ファイルが巨大であればあるほど、読み込み処理に時間とリソース
      (主にメモリ)
      を消費します。さらに、更新処理を行う際も基本的にファイル全体を書き戻す必要があり、処理時間が長くなるだけでなく、同時利用時の競合リスクも高まります。</p>
      <p>無論、ファイルの途中位置に部分的な読み書きを行うことは理論上可能ですが、そのようなバイトオフセットを扱う実装は複雑であり、データファイルの構造に応じてアプリごとに独自の仕組みを設計・実装する必要があります。また、巨大なファイルのなかから特定のデータを高速に検索するには、インデックスやキャッシュといった仕組みが必要ですが、これを自前で実装することは現実的ではありません。</p>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>ファイルI/Oにおける「バイトオフセット」とは何ですか。</p>
      </blockquote>
      <blockquote>
      <p>「大きなデータファイルのから特定のデータを高速に検索するためには、インデックスやキャッシュといった仕組みが必要」と聞きました。「インデックス」と「キャッシュ」の基本的な仕組みを教えてください。</p>
      </blockquote>
      <hr />
      <p>以上のような理由から (その他にも様々な理由から)
      <strong>複数のユーザや複数のアプリから、同時にデータを読み書きするようなシステム</strong>
      において、CSV や JSON
      などのデータファイルを共用してデータ管理することは、現実的ではないという結論となります。</p>
      <p>もちろん、高度な設計と実装技術を駆使すれば、これらの問題を解決することは可能です。ただし、そのような高度なデータ管理の仕組みを具現化したものこそが「DBMS」であり、通常のシステム開発において、それを自前で開発することはありません。</p>
      <p>ここでに示した問題や制約は DBMS
      を導入し、それを適切に利用することで大部分を解決することができます。</p>
      <h1 data-number="4" id="dbms-を利用したデータ管理の概要"><span
      class="header-section-number">4</span> DBMS を利用したデータ管理の概要</h1>
      <p>「OSのファイルシステムを直接利用したデータ管理」と「DBMSを使ったデータ管理」の違いについて整理しておきます。</p>
      <h2 data-number="4.1" id="osのファイルシステムを直接利用したデータ管理"><span
      class="header-section-number">4.1</span> OSのファイルシステムを直接利用したデータ管理</h2>
      <ul>
      <li>アプリは、<strong>OSのファイルシステムAPI</strong> や
      <strong>そのラッパーライブラリ</strong>
      を使用して、CSV、JSON、バイナリなどのファイルを直接的に読み書きすることで「データの永続化」を実現します。
      <ul>
      <li>ファイルの読み書き処理は、アプリ内部に組込み可能で外部サーバなどを必要としません。</li>
      </ul></li>
      <li>アプリの設計にあわせて<strong>最適化した任意のデータ構造・スキーマ・ファイル形式でデータを永続化できる柔軟性</strong>があります。</li>
      <li>検索処理の最適化、データ整合性の保証、複数ユーザーの同時アクセスに対する排他制御は、すべてアプリの責務として実装する必要があります。</li>
      </ul>
      <p><strong>プロンプト例</strong></p>
      <blockquote>
      <p>ラッパーライブラリとは何ですか。</p>
      </blockquote>
      <h2 data-number="4.2" id="dbms-を使ったデータ管理"><span
      class="header-section-number">4.2</span> DBMS を使ったデータ管理</h2>
      <ul>
      <li>PostgreSQL や MySQL のような DBMS を使用する場合、アプリとは別に
      <strong>独立したDBMSサーバを構築して起動しておく必要</strong> があります。
      <ul>
      <li>DBMSサーバは、アプリと同一のホスト上でも、ネットワーク (TCP/IP)
      接続された別ホストに配置しても問題ありません。</li>
      <li>SQLite のような組み込み型の DBMS ではサーバを立てる必要はありません。</li>
      </ul></li>
      <li>アプリは、<strong>DBMSクライアントライブラリ</strong>
      を使用して、データモデルに応じた形式でデータを操作します。
      <ul>
      <li>特にリレーショナルモデルの DBMS (RDBMS) では、<strong>SQL (Structured Query
      Language)</strong>
      という標準化された言語を使用してデータの検索・挿入・更新・削除を行います。</li>
      </ul></li>
      <li>検索処理の最適化、データ整合性の保証、複数ユーザーの同時アクセスに対する排他制御は、DBMS側で提供されます。</li>
      <li>DBMSは、その内部のストレージエンジン (ストレージマネージャ) により、<span
      class="masked">最終的にはOSのファイルシステムを利用してデータを物理的に保存</span> します。
      <ul>
      <li>ただし、アプリ開発者は、この低レベルのファイル操作を意識する必要はなく、DBMS
      が提供する抽象化されたインターフェイスを通じてデータを扱うことができます。</li>
      </ul></li>
      </ul>
      <p><strong>プロンプト例</strong></p>
      <blockquote>
      <p>PostgreSQL や MySQL のような DMBS は、TCP/IP
      で別ホストに配置したクライアントから接続できると聞きました。アプリケーション層では、どのようなプロトコルを使うのですか。</p>
      </blockquote>
      <blockquote>
      <p>リレーショナルデータベースにおける「データ整合性の保証」とは、どのようなものですか。具体例で解説してください。</p>
      </blockquote>
      <h3 data-number="4.2.1" id="定着確認-4"><span class="header-section-number">4.2.1</span>
      定着確認</h3>
      <ul>
      <li>データベースに関する文脈で SQL とは何の略語か英語で答えよ。
      <ul>
      <li><strong>答え</strong>: <span class="masked">Structured Query Language</span></li>
      </ul></li>
      <li>次の説明は「適切である」か「適切ではない」か答えよ。
      <ul>
      <li><strong>答え</strong>: <span class="masked">適切である</span></li>
      </ul></li>
      </ul>
      <blockquote>
      <p>PostgreSQL のような DBMS は、ネットワーク経由 (TCP/IP)
      で接続可能な別ホストに配置することもできる。</p>
      </blockquote>
      <ul>
      <li>次の説明は「適切である」か「適切ではない」か答えよ。
      <ul>
      <li><strong>答え</strong>: <span class="masked">適切である</span></li>
      </ul></li>
      </ul>
      <blockquote>
      <p>DBMSサーバへの接続には、DBMSクライアントライブラリまたは専用のクライアントアプリを使用する。</p>
      </blockquote>
      <ul>
      <li>次の説明は「適切である」か「適切ではない」か答えよ。
      <ul>
      <li><strong>答え</strong>: <span class="masked">適切ではない</span></li>
      </ul></li>
      </ul>
      <blockquote>
      <p>DBMS (サーバのストレージエンジン)
      は、OSのファイルシステムを利用することなくデータの永続化を実現している。</p>
      </blockquote>
      <h1 data-number="5" id="データベースの種類"><span class="header-section-number">5</span>
      データベースの種類</h1>
      <p>データベースのアーキテクチャ (内部の仕組み/データの整理方法) は、大きく「<strong>RDB
      (リレーショナルデータベース)</strong>」と「<strong>NoSQL
      (ノーエスキューエル)</strong>」の2つに分けることができます。本科目では、DBの代表的モデルであり、大規模システムの基盤技術として広く利用される
      <strong>RDB (PostgreSQL)</strong> について約8割の時間をかけて学び、その後、約2割の時間を使って
      NoSQL の1種である <strong>ドキュメント指向データベース (MongoDB)</strong>
      について学んでいきます。</p>
      <ul>
      <li>各種データベースモデルについては「📖 <strong>教科書
      pp.6-11</strong>」を読んでおいてください。
      <ul>
      <li><strong>リレーショナルデータベース</strong> (RDB)</li>
      <li>オブジェクト指向データベース
      <ul>
      <li>「オブジェクトデータベース」とも呼ばれます。</li>
      </ul></li>
      <li>XMLデータベース</li>
      <li><strong>キーバリュー型ストア (KVS)</strong>
      <ul>
      <li>Next.js などのモダンな Web アプリ開発では、状態管理・状態共有に
      <strong>Redis</strong>（レディス）などの KVS
      が使われることがあります。本科目では取り扱いませんが、興味のある学生はぜひ調べてみてください。</li>
      </ul></li>
      <li><strong>ドキュメント指向データベース</strong>
      <ul>
      <li>「ドキュメント型データベース」とも呼ばれます。</li>
      </ul></li>
      <li>階層型データベース</li>
      </ul></li>
      </ul>
      <p>なお、本科目では、リレーショナルデータベースとして PostgreSQL を使用しますが、PostgreSQL
      は、リレーショナルモデルに基づくだけはなく <span
      class="masked">オブジェクト指向データベース的な特徴や機能</span>
      も備えています。実際、PostgreSQLの<a
      href="https://www.postgresql.org/docs/current/intro-whatis.html">公式ドキュメント</a>のなかでも
      <strong>object-relational database system (ORDBMS)</strong> と説明されています。</p>
      <ul>
      <li>PostgreSQL
      では「<strong>可変長配列型</strong>」や「<strong>JSON型</strong>」をスキーマの一部として定義し、直接的に扱うことができます。これらは単に文字列としてシリアライズして保存されているのではなく、効率的な検索や更新を行えるような形式でフィールドに保存されます。</li>
      </ul>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>Redis とはなんですか？Next.js などのウェブアプリにおいて、状態管理・状態共有
      に使われることがあると聞いたのですが、どのように利用するのかイメージがつきません。</p>
      </blockquote>
      <h1 data-number="6" id="リレーショナルデータベース-rdb"><span
      class="header-section-number">6</span> リレーショナルデータベース (RDB)</h1>
      <p><strong>RDB</strong> (Relational Database、リレーショナルデータベース、関係データベース) は
      シンプルな「<strong>2次元の表形式</strong>」でデータを保持することが特徴の DB です。近年では
      <span class="masked">SNSなどのウェブアプリやオンラインゲーム</span> などを中心に
      <strong>NoSQL</strong> の普及も進んでいますが、単に「DB」と言えば RDB
      を指すほど一般的かつ代表的なモデルであり、特に「<strong>基幹システム</strong>」や「ECサイト」などで広く採用されています。</p>
      <p>表形式 (テーブル形式)
      によるデータ管理には多数のメリットがあるものの<strong>「可変長配列」や「階層構造のデータ」を直接的に扱えない</strong>
      という欠点があります (でも、PostgreSQL では扱えます)。</p>
      <ul>
      <li>RDB の DBMS を、特に「<strong>RDBMS</strong> (Relational Database Management
      System)」といいます。</li>
      </ul>
      <p>PostgreSQL や MySQL などの主要な RDBMS (サーバ)
      に対しては、公式のものからサードパーティ製まで様々なクライアントツールから接続することができます。また、各種プログラム
      (TypeScript、Python、Java、C/C++、C# など) においても専用の <strong>ドライバ</strong> や ORM
      (Object Relational Mapper) を使って、RDBMS に接続して利用することができます。</p>
      <ul>
      <li>PostgreSQL の公式のクライアントツール: <strong>psql</strong></li>
      <li>MySQL の公式のクライアントツール: <strong>mysql</strong></li>
      <li>Oracle Database の公式のクライアントツール: <strong>SQL*Plus</strong></li>
      <li>DbGate（Postgres、MySQL、SQLite などに対応したウェブベースのクライアントツール)</li>
      </ul>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>ソフトウェア開発の文脈において「基幹システム」とはどのようなソフトウェアを指しますか。学生でもイメージできるように教えてください。</p>
      </blockquote>
      <blockquote>
      <p>RDBMS
      のクライアントツールとは何ですか？RDBMSサーバとはどのように役割が違うのですか。「PostgreSQL」と「psql」の違いを教えてください。</p>
      </blockquote>
      <h2 data-number="6.1" id="rdbの基礎"><span class="header-section-number">6.1</span>
      RDBの基礎</h2>
      <p><strong>(このセクションは「情報2」の第10回講義の増補版です)</strong></p>
      <p>リレーショナルデータベース (RDB: Relational Database) とは Excel のような
      <strong>表形式</strong>
      でデータを管理するデータベースモデルです。「<strong>RDB</strong>」と略されほか、「<strong>関係データベース</strong>」とも呼ばれたりします。特に「ITパスポート試験」や「基本情報技術者試験」では
      <span class="masked">関係データベース</span> という呼称が使われます。</p>
      <p>RDBでは、Excel
      のシートに相当するものを「<strong>テーブル（Table）</strong>」と呼びます。また、「列」を「<strong>カラム
      (Column)</strong>」や「<strong>属性 (Attribute)</strong>」、行を「<strong>レコード
      (Record)</strong>」や「<strong>タプル
      (Tuple)</strong>」のように呼びます。カラムには「名前」「誕生日」「残業時間」などの項目が設定され、レコードにはそれぞれの項目に対応する具体的な値
      (例えば
      <code>1，'高負荷 耐子'，'1985-06-21', 65, 1</code>、<code>2，'不具合 直志'，'1990-11-02', 48, 1</code>
      など) が入ります。</p>
      <p>以下は社員情報を管理するためのテーブル群の例です。</p>
      <p><strong>■ employees (社員) テーブル</strong></p>
      <table>
      <thead>
      <tr class="header">
      <th style="text-align: center;">id</th>
      <th>name</th>
      <th>birthday</th>
      <th style="text-align: right;">overtime</th>
      <th style="text-align: center;">department_id</th>
      </tr>
      </thead>
      <tbody>
      <tr class="odd">
      <td style="text-align: center;">1</td>
      <td>高負荷 耐子</td>
      <td>1985-06-21</td>
      <td style="text-align: right;">65</td>
      <td style="text-align: center;">1</td>
      </tr>
      <tr class="even">
      <td style="text-align: center;">2</td>
      <td>不具合 直志</td>
      <td>1990-11-02</td>
      <td style="text-align: right;">48</td>
      <td style="text-align: center;">1</td>
      </tr>
      <tr class="odd">
      <td style="text-align: center;">3</td>
      <td>品質 守</td>
      <td>1978-03-14</td>
      <td style="text-align: right;">5</td>
      <td style="text-align: center;">2</td>
      </tr>
      <tr class="even">
      <td style="text-align: center;">4</td>
      <td>構文 誤次郎</td>
      <td>1995-07-30</td>
      <td style="text-align: right;">85</td>
      <td style="text-align: center;">3</td>
      </tr>
      <tr class="odd">
      <td style="text-align: center;">5</td>
      <td>仕様 曖昧子</td>
      <td>1988-09-09</td>
      <td style="text-align: right;">72</td>
      <td style="text-align: center;">3</td>
      </tr>
      <tr class="even">
      <td style="text-align: center;">6</td>
      <td>保守 絶望太</td>
      <td>1982-12-25</td>
      <td style="text-align: right;">120</td>
      <td style="text-align: center;">3</td>
      </tr>
      <tr class="odd">
      <td style="text-align: center;">7</td>
      <td>負債 雪崩美</td>
      <td>1975-04-05</td>
      <td style="text-align: right;">58</td>
      <td style="text-align: center;">4</td>
      </tr>
      </tbody>
      </table>
      <p><strong>■ departments (部署) テーブル</strong></p>
      <table>
      <thead>
      <tr class="header">
      <th style="text-align: center;">id</th>
      <th style="text-align: center;">name</th>
      </tr>
      </thead>
      <tbody>
      <tr class="odd">
      <td style="text-align: center;">1</td>
      <td style="text-align: center;">再起動対策本部</td>
      </tr>
      <tr class="even">
      <td style="text-align: center;">2</td>
      <td style="text-align: center;">曖昧戦略部</td>
      </tr>
      <tr class="odd">
      <td style="text-align: center;">3</td>
      <td style="text-align: center;">バグ発生推進部</td>
      </tr>
      <tr class="even">
      <td style="text-align: center;">4</td>
      <td style="text-align: center;">予算消失部</td>
      </tr>
      <tr class="odd">
      <td style="text-align: center;">5</td>
      <td style="text-align: center;">机上片付け指導部</td>
      </tr>
      </tbody>
      </table>
      <ul>
      <li>データベースのテーブル名は、一般的に <span class="masked">スネークケース**
      (snake_case)</span> で記述され、テーブルが複数の行を持つことから <strong>複数形</strong>
      で命名されることが多いです。</li>
      </ul>
      <p>RDBの重要な機能のひとつに「<strong>JOIN</strong> (結合)」というものがあります。JOIN
      を使うと、複数のテーブルを関連付けて、あたかも1つのテーブルのように扱うことができます。</p>
      <p>例えば、上記の <strong>employees</strong> テーブルには <code>department_id</code>
      という「部署を示す番号だけ」が記録されていますが、<strong>JOIN</strong> を使うことで
      <strong>departments</strong>
      テーブルから「部署名」を引っ張ってきて、「社員情報」と「部署情報」を結合した表にすることができます。具体的には
      <code>employees.department_id</code> と <code>departments.id</code>
      を紐付けて結合し、以下のテーブルのようにすることができます。</p>
      <p><strong>■ employees と departments を 部署ID を使って結合</strong></p>
      <table>
      <thead>
      <tr class="header">
      <th style="text-align: center;">id</th>
      <th>name</th>
      <th>birthday</th>
      <th style="text-align: right;">overtime</th>
      <th style="text-align: center;">department_id</th>
      <th style="text-align: center;">department_name</th>
      </tr>
      </thead>
      <tbody>
      <tr class="odd">
      <td style="text-align: center;">1</td>
      <td>高負荷 耐子</td>
      <td>1985-06-21</td>
      <td style="text-align: right;">65</td>
      <td style="text-align: center;">1</td>
      <td style="text-align: center;">再起動対策本部</td>
      </tr>
      <tr class="even">
      <td style="text-align: center;">2</td>
      <td>不具合 直志</td>
      <td>1990-11-02</td>
      <td style="text-align: right;">48</td>
      <td style="text-align: center;">1</td>
      <td style="text-align: center;">再起動対策本部</td>
      </tr>
      <tr class="odd">
      <td style="text-align: center;">3</td>
      <td>品質 守</td>
      <td>1978-03-14</td>
      <td style="text-align: right;">5</td>
      <td style="text-align: center;">2</td>
      <td style="text-align: center;">曖昧戦略部</td>
      </tr>
      <tr class="even">
      <td style="text-align: center;">4</td>
      <td>構文 誤次郎</td>
      <td>1995-07-30</td>
      <td style="text-align: right;">85</td>
      <td style="text-align: center;">3</td>
      <td style="text-align: center;">バグ発生推進部</td>
      </tr>
      <tr class="odd">
      <td style="text-align: center;">5</td>
      <td>仕様 曖昧子</td>
      <td>1988-09-09</td>
      <td style="text-align: right;">72</td>
      <td style="text-align: center;">3</td>
      <td style="text-align: center;">バグ発生推進部</td>
      </tr>
      <tr class="even">
      <td style="text-align: center;">6</td>
      <td>保守 絶望太</td>
      <td>1982-12-25</td>
      <td style="text-align: right;">120</td>
      <td style="text-align: center;">3</td>
      <td style="text-align: center;">バグ発生推進部</td>
      </tr>
      <tr class="odd">
      <td style="text-align: center;">7</td>
      <td>負債 雪崩美</td>
      <td>1975-04-05</td>
      <td style="text-align: right;">58</td>
      <td style="text-align: center;">4</td>
      <td style="text-align: center;">予算消失部</td>
      </tr>
      </tbody>
      </table>
      <p>このように、<strong>データを複数のテーブルに分けて管理し</strong>、必要に応じて
      <strong>JOIN</strong> で結合することで <span class="masked">効率的なデータ管理</span>
      を実現することができます。もし、全ての情報を1つのテーブルにまとめて管理すると、「部署名」のような共通情報が社員の数だけ重複してしまうことになります。例えば、バグ発生推進部に50人が所属していれば「バグ発生推進部」という文字列を50個保持することになります。これは容量の無駄になるだけではなく、<strong>部署名を変更したいときに50箇所すべてを修正しなければならず、ミスや修正漏れの原因</strong>にもなり得ます。</p>
      <p>一方で、上記のようにテーブルを分けて管理すれば、部署名の変更は <strong>departments</strong>
      テーブルの1レコードを修正するだけで済み、データの不整合を防ぐことができます。また <span
      class="masked">現時点において所属する社員がいない「机上片付け指導部」という情報</span>
      も自然な形で保持できるメリットもあります。</p>
      <p>なお、RDBMS では <strong>SQL</strong>
      という言語を使って、データベースのデータに対する「検索」「取得」「挿入」「更新」「削除」などの一連の操作指示
      (＝これを <strong>クエリ</strong> (Query) と呼びます)
      を出せることが特徴となっています。次週以降、しばらくは SQL
      を使ったクエリについて学んでいきます。</p>
      <h3 data-number="6.1.1" id="定着確認-5"><span class="header-section-number">6.1.1</span>
      定着確認</h3>
      <ul>
      <li>RDBMS に対するクエリを記述するために使用される言語をアルファベット3文字で答えよ。
      <ul>
      <li><strong>答え</strong>: <span class="masked">SQL</span></li>
      </ul></li>
      <li>RDB において、一般にテーブル（表）の「列」を指す語をカタカナで答えよ。
      <ul>
      <li><strong>答え</strong>: <span class="masked">カラム、フィールド、アトリビュート
      (属性)</span></li>
      </ul></li>
      <li>RDB において、一般にテーブル（表）の「行」を指す語をカタカナで答えよ。
      <ul>
      <li><strong>答え</strong>: <span class="masked">レコード、タプル</span></li>
      </ul></li>
      </ul>
      <h2 data-number="6.2" id="演習"><span class="header-section-number">6.2</span> 演習</h2>
      <p>オンライン SQL 実行環境である<a href="https://www.db-fiddle.com/">DB
      Fiddle</a>というサービスを利用して、SQL を使って RDBMS (PostgreSQL)
      を操作する体験をしてみたいと思います。</p>
      <ul>
      <li>SQL
      の詳細については、<strong>今後の授業の内容なので、現時点で詳細に理解する必要はありません</strong>。</li>
      </ul>
      <p>サイトにアクセスして、Database として「PostgreSQL 17」を選択してください。PostgreSQL
      は、毎年9～10月頃に新しいメジャーバージョンがリリースされていて、v17 は 2024年9月26日
      (約1年前) にリリースされています。</p>
      <figure>
      <img src="figs/01/db-fiddle-01.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>まずは、社員と部署に関するテーブルのスキーマを定義し、そこにデータを挿入
      (<strong>INSERT</strong>) していきたいと思います。<a
      href="https://github.com/TakeshiWada1980/DB-2025/blob/main/docs/codes/01/init-table.sql">こちら</a>(👈<code>init-table.sql</code>)
      から SQL をコピーして、以下のように <strong>Schema SQL</strong> のペイン (領域)
      に貼り付けてください。</p>
      <figure>
      <img src="figs/01/db-fiddle-02.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p><strong>Schema SQL</strong> ペインで <code>[Ctrl]+[Enter]</code>
      を押下すると実際にコードが実行されます。成功すると、<strong>Results</strong> ペイン に
      <code>There are no results to be displayed.</code> のように表示されます。失敗する場合は
      Daatabase
      が「PostgreSQL」になっていることを確認してください。「MySQL」や「SQLite」になっていると失敗します。</p>
      <hr />
      <p>次に、<strong>employees</strong> テーブルから全てのレコードを取得してみます。以下のように
      <strong>Query SQL</strong> に <code>SELECT * FROM employees;</code>
      を貼付けて、<code>[Ctrl]+[Enter]</code> を押下してください。<strong>Results</strong>
      のペインに結果が表示されるはずです。</p>
      <ul>
      <li>SQL文の最後にはセミコロン <code>;</code> が必要です。記述忘れに注意してください。</li>
      </ul>
      <figure>
      <img src="figs/01/db-fiddle-03.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>以下、いくつかのSQLの例を示します。実際に <strong>Query SQL</strong> ペインに貼り付け、実行
      (<code>[Ctrl]+[Enter]</code>) して意図するような結果が得られることを確認してください。</p>
      <h3 data-number="6.2.1" id="where句-と-order-by句の使用例"><span
      class="header-section-number">6.2.1</span> WHERE句 と ORDER BY句の使用例</h3>
      <div class="sourceCode" id="cb4"
      data-caption="残業時間50時間以上の社員を降順で出力するSQL"><pre
      class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">SELECT</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="kw">id</span>,</span>
<span id="cb4-3"><a href="#cb4-3"></a>  name,</span>
<span id="cb4-4"><a href="#cb4-4"></a>  overtime</span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="kw">FROM</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>  employees</span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="kw">WHERE</span></span>
<span id="cb4-8"><a href="#cb4-8"></a>  overtime <span class="op">&gt;=</span> <span class="dv">50</span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>  overtime <span class="kw">DESC</span>;</span></code></pre></div>
      <p>コードをじっくりと読み解けば、トライ＆エラーで以下の演習に取り組めると思います。腕試しで挑戦してみてください。</p>
      <ul>
      <li>演習: <code>birthday</code> という列 (カラム) を出力するようにしてみましょう。</li>
      <li>演習: 残業時間が「80時間以上」の社員だけを出力するようにしてみましょう。</li>
      <li>演習: 残業時間の昇順に全社員を出力するようにしてみましょう。ヒント: <span
      class="masked"><code>ASC</code></span></li>
      </ul>
      <h3 data-number="6.2.2" id="join-内部結合-の使用例"><span
      class="header-section-number">6.2.2</span> JOIN (内部結合) の使用例</h3>
      <p>RDBの重要な機能のひとつである「<strong>JOIN (結合)</strong>」の例です。実際にクエリ (SQL)
      を発行して、どのような結果が返ってくるかを確認してみてください。</p>
      <div class="sourceCode" id="cb5"
      data-caption="employeesテーブルとdepartmentsテーブルを結合するSQL"><pre
      class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">SELECT</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>  e.<span class="kw">id</span>,</span>
<span id="cb5-3"><a href="#cb5-3"></a>  e.name,</span>
<span id="cb5-4"><a href="#cb5-4"></a>  e.birthday,</span>
<span id="cb5-5"><a href="#cb5-5"></a>  e.overtime,</span>
<span id="cb5-6"><a href="#cb5-6"></a>  e.department_id,</span>
<span id="cb5-7"><a href="#cb5-7"></a>  d.name <span class="kw">AS</span> <span class="ot">&quot;department_name&quot;</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="kw">FROM</span></span>
<span id="cb5-9"><a href="#cb5-9"></a>  employees <span class="kw">AS</span> e</span>
<span id="cb5-10"><a href="#cb5-10"></a>  <span class="kw">JOIN</span> departments <span class="kw">AS</span> d <span class="kw">ON</span> e.department_id <span class="op">=</span> d.<span class="kw">id</span>;</span></code></pre></div>
      <ul>
      <li>演習: 実行結果として表示されるテーブルの <code>name</code> という列 (カラム) のヘッダを
      <code>名前</code> に変えてみましょう。
      <ul>
      <li>ヒント: <span class="masked">第07行目を参考に</span></li>
      </ul></li>
      </ul>
      <h3 data-number="6.2.3" id="group-by句-と-join-外部結合-と集計関数の使用例"><span
      class="header-section-number">6.2.3</span> GROUP BY句 と JOIN (外部結合)
      と集計関数の使用例</h3>
      <p>いまの時点で、SQLの構文について理解する必要はありません。大事なのは「<strong>SQLでこんな集計できちゃうんだ</strong>🤔」とイメージを掴むことです。ただし、ちょっとでも読解しようとする姿勢と行動は実力アップにつながります
      (また、<span class="masked">Python や TypeScript
      プログラムで同様の処理を実装するなら･･･</span>を考えてみるとおもしろいかもしれません)。</p>
      <div class="sourceCode" id="cb6" data-caption="部署ごとの残業時間を集計するSQL"><pre
      class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">SELECT</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>  d.<span class="kw">id</span> <span class="kw">AS</span> <span class="ot">&quot;部署ID&quot;</span>,</span>
<span id="cb6-3"><a href="#cb6-3"></a>  d.name <span class="kw">AS</span> <span class="ot">&quot;部署名&quot;</span>,</span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="fu">COUNT</span>(e.<span class="kw">id</span>) <span class="kw">AS</span> <span class="ot">&quot;人数&quot;</span>,</span>
<span id="cb6-5"><a href="#cb6-5"></a>  <span class="fu">COALESCE</span>(<span class="fu">SUM</span>(e.overtime), <span class="dv">0</span>) <span class="kw">AS</span> <span class="ot">&quot;総残業時間&quot;</span>,</span>
<span id="cb6-6"><a href="#cb6-6"></a>  <span class="fu">ROUND</span>(<span class="fu">COALESCE</span>(<span class="fu">AVG</span>(e.overtime), <span class="dv">0</span>), <span class="dv">1</span>) <span class="kw">AS</span> <span class="ot">&quot;平均残業時間&quot;</span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="kw">FROM</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>  departments <span class="kw">AS</span> d</span>
<span id="cb6-9"><a href="#cb6-9"></a>  <span class="kw">LEFT</span> <span class="kw">JOIN</span> employees <span class="kw">AS</span> e <span class="kw">ON</span> d.<span class="kw">id</span> <span class="op">=</span> e.department_id</span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="kw">GROUP</span> <span class="kw">BY</span></span>
<span id="cb6-11"><a href="#cb6-11"></a>  d.<span class="kw">id</span>,</span>
<span id="cb6-12"><a href="#cb6-12"></a>  d.name</span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb6-14"><a href="#cb6-14"></a>  d.<span class="kw">id</span>;</span></code></pre></div>
      <p>💻<strong>実行結果</strong></p>
      <table>
      <thead>
      <tr class="header">
      <th style="text-align: center;">部署ID</th>
      <th>部署名</th>
      <th style="text-align: center;">人数</th>
      <th style="text-align: right;">総残業時間</th>
      <th style="text-align: right;">平均残業時間</th>
      </tr>
      </thead>
      <tbody>
      <tr class="odd">
      <td style="text-align: center;">1</td>
      <td>再起動対策本部</td>
      <td style="text-align: center;">2</td>
      <td style="text-align: right;">113</td>
      <td style="text-align: right;">56.5</td>
      </tr>
      <tr class="even">
      <td style="text-align: center;">2</td>
      <td>曖昧戦略部</td>
      <td style="text-align: center;">1</td>
      <td style="text-align: right;">5</td>
      <td style="text-align: right;">5.0</td>
      </tr>
      <tr class="odd">
      <td style="text-align: center;">3</td>
      <td>バグ発生推進部</td>
      <td style="text-align: center;">3</td>
      <td style="text-align: right;">277</td>
      <td style="text-align: right;">92.3</td>
      </tr>
      <tr class="even">
      <td style="text-align: center;">4</td>
      <td>予算消失部</td>
      <td style="text-align: center;">1</td>
      <td style="text-align: right;">58</td>
      <td style="text-align: right;">58.0</td>
      </tr>
      <tr class="odd">
      <td style="text-align: center;">5</td>
      <td>机上片付け指導部</td>
      <td style="text-align: center;">0</td>
      <td style="text-align: right;">0</td>
      <td style="text-align: right;">0.0</td>
      </tr>
      </tbody>
      </table>
      <h3 data-number="6.2.4" id="caseの使用例"><span class="header-section-number">6.2.4</span>
      CASEの使用例</h3>
      <p>以下は、脱・初心者レベルのクエリになります。授業を重ねながら、このレベルのクエリも自分の手で書けるように力をつけていきましょう。</p>
      <div class="sourceCode" id="cb7"
      data-caption="部署ごとに社員が何年代生まれかを集計するSQL"><pre
      class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">SELECT</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>  d.<span class="kw">id</span> <span class="kw">AS</span> <span class="ot">&quot;部署ID&quot;</span>,</span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="cf">CASE</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>    <span class="cf">WHEN</span> <span class="fu">GROUPING</span>(d.<span class="kw">id</span>) <span class="op">=</span> <span class="dv">1</span> <span class="cf">THEN</span> <span class="st">&#39;(全体)&#39;</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>    <span class="cf">ELSE</span> <span class="fu">MAX</span>(d.name)</span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span class="cf">END</span> <span class="kw">AS</span> <span class="ot">&quot;部署名&quot;</span>,</span>
<span id="cb7-7"><a href="#cb7-7"></a>  <span class="fu">SUM</span>(</span>
<span id="cb7-8"><a href="#cb7-8"></a>    <span class="cf">CASE</span></span>
<span id="cb7-9"><a href="#cb7-9"></a>      <span class="cf">WHEN</span> birthday <span class="kw">BETWEEN</span> <span class="st">&#39;1970-01-01&#39;</span> <span class="kw">AND</span> <span class="st">&#39;1979-12-31&#39;</span>  <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb7-10"><a href="#cb7-10"></a>      <span class="cf">ELSE</span> <span class="dv">0</span></span>
<span id="cb7-11"><a href="#cb7-11"></a>    <span class="cf">END</span></span>
<span id="cb7-12"><a href="#cb7-12"></a>  ) <span class="kw">AS</span> <span class="ot">&quot;1970年代&quot;</span>,</span>
<span id="cb7-13"><a href="#cb7-13"></a>  <span class="fu">SUM</span>(</span>
<span id="cb7-14"><a href="#cb7-14"></a>    <span class="cf">CASE</span></span>
<span id="cb7-15"><a href="#cb7-15"></a>      <span class="cf">WHEN</span> birthday <span class="kw">BETWEEN</span> <span class="st">&#39;1980-01-01&#39;</span> <span class="kw">AND</span> <span class="st">&#39;1989-12-31&#39;</span>  <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb7-16"><a href="#cb7-16"></a>      <span class="cf">ELSE</span> <span class="dv">0</span></span>
<span id="cb7-17"><a href="#cb7-17"></a>    <span class="cf">END</span></span>
<span id="cb7-18"><a href="#cb7-18"></a>  ) <span class="kw">AS</span> <span class="ot">&quot;1980年代&quot;</span>,</span>
<span id="cb7-19"><a href="#cb7-19"></a>  <span class="fu">SUM</span>(</span>
<span id="cb7-20"><a href="#cb7-20"></a>    <span class="cf">CASE</span></span>
<span id="cb7-21"><a href="#cb7-21"></a>      <span class="cf">WHEN</span> birthday <span class="kw">BETWEEN</span> <span class="st">&#39;1990-01-01&#39;</span> <span class="kw">AND</span> <span class="st">&#39;1999-12-31&#39;</span>  <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb7-22"><a href="#cb7-22"></a>      <span class="cf">ELSE</span> <span class="dv">0</span></span>
<span id="cb7-23"><a href="#cb7-23"></a>    <span class="cf">END</span></span>
<span id="cb7-24"><a href="#cb7-24"></a>  ) <span class="kw">AS</span> <span class="ot">&quot;1990年代&quot;</span></span>
<span id="cb7-25"><a href="#cb7-25"></a><span class="kw">FROM</span></span>
<span id="cb7-26"><a href="#cb7-26"></a>  departments <span class="kw">AS</span> d</span>
<span id="cb7-27"><a href="#cb7-27"></a>  <span class="kw">LEFT</span> <span class="kw">JOIN</span> employees <span class="kw">AS</span> e <span class="kw">ON</span> d.<span class="kw">id</span> <span class="op">=</span> e.department_id</span>
<span id="cb7-28"><a href="#cb7-28"></a><span class="kw">GROUP</span> <span class="kw">BY</span></span>
<span id="cb7-29"><a href="#cb7-29"></a>  <span class="kw">ROLLUP</span> (d.<span class="kw">id</span>)</span>
<span id="cb7-30"><a href="#cb7-30"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb7-31"><a href="#cb7-31"></a>  d.<span class="kw">id</span>;</span></code></pre></div>
      <p>💻<strong>実行結果</strong></p>
      <table>
      <thead>
      <tr class="header">
      <th style="text-align: center;">部署ID</th>
      <th>部署名</th>
      <th style="text-align: center;">1970年代</th>
      <th style="text-align: center;">1980年代</th>
      <th style="text-align: center;">1990年代</th>
      </tr>
      </thead>
      <tbody>
      <tr class="odd">
      <td style="text-align: center;">1</td>
      <td>再起動対策本部</td>
      <td style="text-align: center;">0</td>
      <td style="text-align: center;">1</td>
      <td style="text-align: center;">1</td>
      </tr>
      <tr class="even">
      <td style="text-align: center;">2</td>
      <td>曖昧戦略部</td>
      <td style="text-align: center;">1</td>
      <td style="text-align: center;">0</td>
      <td style="text-align: center;">0</td>
      </tr>
      <tr class="odd">
      <td style="text-align: center;">3</td>
      <td>バグ発生推進部</td>
      <td style="text-align: center;">0</td>
      <td style="text-align: center;">2</td>
      <td style="text-align: center;">1</td>
      </tr>
      <tr class="even">
      <td style="text-align: center;">4</td>
      <td>予算消失部</td>
      <td style="text-align: center;">1</td>
      <td style="text-align: center;">0</td>
      <td style="text-align: center;">0</td>
      </tr>
      <tr class="odd">
      <td style="text-align: center;">5</td>
      <td>机上片付け指導部</td>
      <td style="text-align: center;">0</td>
      <td style="text-align: center;">0</td>
      <td style="text-align: center;">0</td>
      </tr>
      <tr class="even">
      <td style="text-align: center;"></td>
      <td>(全体)</td>
      <td style="text-align: center;">2</td>
      <td style="text-align: center;">3</td>
      <td style="text-align: center;">2</td>
      </tr>
      </tbody>
      </table>
      <h2 data-number="6.3" id="主要なrdbms"><span class="header-section-number">6.3</span>
      主要なRDBMS</h2>
      <p>代表的な RDBMS として <strong>PostgreSQL</strong>、MySQL、MariaDB、Oracle
      Database、Microsoft SQL Server、<strong>SQLite</strong>、Microsoft Access
      などが挙げられます。</p>
      <p>この授業では <strong>PostgreSQL</strong> を使用していきます。</p>
      <h3 data-number="6.3.1" id="postgresql"><span class="header-section-number">6.3.1</span>
      PostgreSQL👑</h3>
      <ul>
      <li>オープンソースのクライアント・サーバー型RDBMS。高機能で拡張性に優れ、標準 SQL
      への準拠度も高い。学術や業務システムで広く利用されている。<strong>無償</strong>。</li>
      <li>JSON/JSONB型のネイティブサポート、フルテキスト検索 (全文検索) 、地理空間データ (PostGIS)
      など、先進的な機能が豊富。Instagram などの大規模サービスで採用されている。</li>
      <li>トランザクションの堅牢性が高く、複雑なクエリやデータ整合性が重要なシステムに適している。</li>
      </ul>
      <p>近年のモダンなウェブアプリ開発やスタートアップでの採用が増加傾向にあり、PostgreSQL
      のスキルは市場価値が高まっています。標準 SQL に準拠しているため、他の RDBMS
      への応用も効きやすいこともメリットです。AWS RDS、Google Cloud SQL、Azure Database for
      PostgreSQL など主要クラウドで完全サポートされている点でも、選択する価値が高いと思います。</p>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>「PostgreSQL は
      JSON/JSONB型をネイティブサポートしている」と聞きました。これはどういうことですか。</p>
      </blockquote>
      <blockquote>
      <p>「PostgreSQL は 標準SQLへの準拠度が高い」と聞きました。これはどういうことですか。</p>
      </blockquote>
      <h3 data-number="6.3.2" id="mysql"><span class="header-section-number">6.3.2</span> MySQL</h3>
      <ul>
      <li>オープンソースのクライアント・サーバー型RDBMS。ウェブアプリの利用が多い。例えば、WordPress
      は PHP + MySQL
      の組み合わせで動作する設計。基本は無償だが、商用サポート付きの有償版もある。</li>
      <li>読み取り性能が高く、レプリケーション設定が比較的容易。Facebook、Twitter (X)、YouTube
      など世界最大級のウェブサービスで使われてきた実績がある。
      <ul>
      <li>YouTube については、現在はMySQLベースではないことが公表されている。</li>
      </ul></li>
      <li>LAMP スタック (Linux, Apache, MySQL, PHP) の一部として Web
      開発の定番となっている。多くのレンタルサーバーで標準提供されている。
      <ul>
      <li>「M」は MySQL / MariaDB、「P」は PHP / Perl / Python という構成もある。</li>
      </ul></li>
      </ul>
      <p>ウェブ系企業での求人が最も多いです。また、初学者向けの学習リソースが豊富で、最初に学ぶ
      RDBMS として選ばれやすいです。MySQL 8.0 からは機能が大幅に強化され、JSON
      サポートやウィンドウ関数なども追加されています。</p>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>ウェブアプリ開発の文脈において「LAMPスタック」とは何ですか。</p>
      </blockquote>
      <h3 data-number="6.3.3" id="mariadb"><span class="header-section-number">6.3.3</span>
      MariaDB</h3>
      <ul>
      <li>MySQL から派生したオープンソースのクライアント・サーバー型RDBMS。MySQL
      との互換性を持ちながら、コミュニティ主体で開発が続けられている。無償。</li>
      <li>MySQL の開発者が Oracle
      による買収後に立ち上げたプロジェクト。Wikipedia、Google（一部システム）などで採用。</li>
      <li>MySQL からの移行が比較的容易で、最新機能の追加ペースが速い。多くの Linux
      ディストリビューションで MySQL の代わりに標準パッケージとして採用されている。</li>
      </ul>
      <h3 data-number="6.3.4" id="oracle-database"><span class="header-section-number">6.3.4</span>
      Oracle Database</h3>
      <ul>
      <li>商用のクライアント・サーバー型RDBMS。大規模システム向けで豊富な機能を持ち、金融・企業システムで定番。有償。</li>
      <li>エンタープライズレベルの可用性、パフォーマンス、セキュリティ機能を提供。RAC（Real
      Application Clusters）による高可用性構成が可能。</li>
      <li>PL/SQL
      による強力なストアドプロシージャ機能を持つ。大規模トランザクション処理や基幹システムで圧倒的なシェアを誇る。</li>
      </ul>
      <h3 data-number="6.3.5" id="microsoft-sql-server"><span
      class="header-section-number">6.3.5</span> Microsoft SQL Server</h3>
      <ul>
      <li>商用のクライアント・サーバー型RDBMS。Windows
      サーバー環境でよく利用される。有償だが、無償の簡易版 (Express Edition) も提供されている。</li>
      <li>.NET エコシステムとの親和性が高く、C#/ASP.NET での開発に最適。Azure SQL Database
      としてクラウドでも利用可能。</li>
      <li>近年は Linux 対応も進み、Docker コンテナでも動作。Visual Studio
      との統合による優れた開発体験を提供。</li>
      </ul>
      <h3 data-number="6.3.6" id="sqlite"><span class="header-section-number">6.3.6</span>
      SQLite👑</h3>
      <ul>
      <li>組み込み型RDBMS。データベースが 1 ファイルで完結する軽量 DBMS。スマホアプリやブラウザ (例:
      Chrome, Firefox) にも組み込まれている。オープンソースで無償。</li>
      <li>サーバープロセス不要で、ライブラリとしてアプリケーションに直接組み込める。iOS/Android
      アプリ開発での標準的なローカルストレージ。</li>
      <li>テスト環境やプロトタイピング、小規模アプリに最適。世界で最も広く使われているデータベースエンジンと言える
      (数十億以上のSQLiteデータベースがデプロイされていると推定される)。</li>
      </ul>
      <p>モバイルアプリ開発者なら必須スキルになります。Python（標準ライブラリ）、Node.js、React
      Native
      などほぼ全ての開発環境で簡単に使えるようにライブラリが整備されています。ローカル開発環境でのテストやプロトタイプ作成に便利なため「とりあえず動くものをつくる」ときに役立ちます。</p>
      <h3 data-number="6.3.7" id="microsoft-access"><span class="header-section-number">6.3.7</span>
      Microsoft Access</h3>
      <ul>
      <li>デスクトップ（パーソナル）向けのスタンドアロン型 RDBMS。GUI
      による簡便な操作性が特徴。Office 製品の一部として提供されるため有償。</li>
      <li>コーディング不要でフォームやレポートを作成可能。VBA によるカスタマイズにも対応。</li>
      <li>小規模な業務アプリやデータ管理ツールとして、非エンジニアでも扱いやすい。ただし、同時接続数やデータ量に制限があるため、本格的なウェブアプリには不向き。</li>
      </ul>
      <h3 data-number="6.3.8" id="定着確認-6"><span class="header-section-number">6.3.8</span>
      定着確認</h3>
      <ul>
      <li>LAMPスタックの「L」「A」「M」「P」は、それぞれ、何を意味しているか答えよ
      (最も代表的なものを答えること)。
      <ul>
      <li><strong>答え</strong>: <span class="masked">Linux、Apache、MySQL、PHP</span></li>
      </ul></li>
      </ul>
      <h1 data-number="7" id="postgresql-の-環境構築-準備"><span
      class="header-section-number">7</span> PostgreSQL の 環境構築 (準備)</h1>
      <p>RDB (主にSQL演習) のハンズオン学習では <strong>PostgreSQL</strong>
      (ポストグレエスキューエル、ポストグレス、ポスグレ) を使用していきます。PostgreSQL は Windows
      に直接インストールすることもできますが、本科目では「<strong>Docker</strong>」という仕組みを用いて、PostgreSQL
      を「コンテナ」と呼ばれる仮想的な箱の中で起動し、その箱ごと利用します。Docker
      を利用すれば、既存の PC 環境を汚さずに PostgreSQL
      を構築でき、万一破損しても簡単に再構築できます。また、<a
      href="https://dbgate.org/">DbGate</a>という「ウェブベースの DBMS
      クライアント」もコンテナとして利用していきます。</p>
      <p>PostgreSQL コンテナのセットアップは次回の講義で行います。今回は、その前段階として
      <strong>Docker</strong>（<strong>Docker
      Desktop</strong>）のインストールと動作確認までを行います。なお、既に Docker Desktop
      をインストール済みの場合は再インストールの必要はありません。ただし、最新バージョン
      (2025年10月1日現在の最新バージョンは <strong>4.47.0</strong> )
      にアップデートしておくことを推奨します。</p>
      <p>なお、Docker は、Git/GitHub
      とあわせてソフトウェア開発の現場では標準的に使われる技術になっています。既に3年生の後期の「知能情報実験実習1」のなかで
      Docker
      は学んでいると思いますが、日常的な開発でも積極的に利用して慣れておいてください。Git/GitHubと同じで
      <span class="masked">習うよりも慣れろ</span> という技術になります。</p>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>Docker
      は、ソフトウェア開発の現場で標準的に使われる技術だと聞きました。本当ですか。また、Docker
      ってどのような技術なのか教えてください。どうやら、授業で「PostgreSQLのコンテナ」を使うそうです。</p>
      </blockquote>
      <h2 data-number="7.1" id="docker-desktop-のインストール"><span
      class="header-section-number">7.1</span> Docker Desktop のインストール</h2>
      <p>「Docker Desktop」は、Windows や Mac などの環境で Docker
      を利用できるようにする公式アプリです。「Docker」は
      <strong>コンテナを動かすための仕組みそのもの</strong> で、もともと Linux
      向けに設計・開発されたもので、「Docker Desktop」は、それを Windows や Mac
      で簡単に使えるようにする仕組みと GUI を提供するアプリという位置づけになります。</p>
      <p>「Docker Desktop」をインストールすると、自動的に Docker もインストールされ、Windows で
      Docker を利用するための準備が整います。Windows 環境で Docker Desktop
      をインストールする方法はウェブに多数の情報があるので、それを参考にインストールしてください。</p>
      <ul>
      <li><a href="https://www.google.com/search?q=DockerDesktop+インストール+windows">DockerDesktop
      インストール Windows</a>@ Google検索
      <ul>
      <li>比較的に新しい情報を参照するようにしてください。</li>
      <li>Windows で Docker
      を動かすには「Hyper-V」を利用する方法と、「WSL2」を利用する方法があります。基本的に「WSL2」を利用する方法でインストールと設定をしてください。</li>
      </ul></li>
      </ul>
      <div class="note type-tips">
      <p><strong>Dockerアカウントの作成</strong></p>
      <p>Docker 自体はアカウントがなくても利用できますが、Docker Hub からのイメージ取得 (pull)
      に回数制限がかかるなどの不便が生じます。特に授業のように、多数の学生が同時にイメージを取得する状況では、<strong>アカウントを持っていないとイメージのダウンロードが途中で止まったり、時間がかかってしまうことがあります</strong>。</p>
      <p>そのため、事前に Docker アカウント（Docker ID）を作成し、Docker Desktop
      にログインしておくことを強く推奨します。アカウントは「<strong>無料</strong>」で作成できます。授業をスムーズに受講するためにもアカウントを作成して、Docker
      Desktop アプリからログインしておいてください。</p>
      </div>
      <h2 data-number="7.2" id="docker-desktop-の動作確認"><span
      class="header-section-number">7.2</span> Docker Desktop の動作確認</h2>
      <p>Docker Desktop がインストールされ、「<strong>Docker
      が利用できる状態になっているかどうか</strong>」はタスクトレイのアイコン🐋から確認することができます。以下のように「<strong>Docker
      Desktop running</strong>」となっていればOKです。</p>
      <figure>
      <img src="figs/01/docker-01.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>クジラ🐋のアイコンをダブルクリックすると Docker Desktop
      のダッシュボードが起動します。次のように「<strong>WSL2</strong>」を土台として Docker
      が起動するような設定になっていることを確認してください。</p>
      <figure>
      <img src="figs/01/docker-02.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>また、ウィンドウの左下に緑色で「<strong>Engine
      running</strong>」の文字が表示されていることを確認してください。</p>
      <div class="note type-tips">
      <p><strong>DockerDesktopの自動起動の設定</strong></p>
      <p>本科目以外で Docker
      を使用することがなければ、以下のように自動起動をオフにしておくことをお勧めします。なお、自動起動をオフにした場合は、授業の開始前にスタートメニューから「<strong>Docker
      Desktop</strong>」を手動で起動しておいてください。</p>
      <figure>
      <img src="figs/01/docker-04.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      </div>
      <h2 data-number="7.3" id="hello-world-コンテナの起動確認"><span
      class="header-section-number">7.3</span> Hello World コンテナの起動確認</h2>
      <p>Docker Desktop
      の起動が確認できたら、コンテナを問題なく起動できるかを確認しています。ターミナル (PowerShell)
      を開いて <code>docker run --rm hello-world</code> というコマンドを実行してください。</p>
      <pre><code>PS C:\Users\xxxx&gt; docker run --rm hello-world</code></pre>
      <p>このコマンドの意味については、生成AIやウェブ検索を利用して把握しておいてください。</p>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>Docker の「hello-world」イメージは、何のために使用しますか。</p>
      </blockquote>
      <blockquote>
      <p><code>docker run --rm hello-world</code> というコマンドの意味を Docker
      初心者向けに解説してください。</p>
      </blockquote>
      <p>処理が正常に実行されると (＝<code>hello-world</code> <strong>というイメージを DockerHub
      から取得して、それを元にコンテナを作成して、そのコンテナを起動・実行し、実行完了後にコンテナが削除できると</strong>)、以下のような応答となります。</p>
      <ul>
      <li>リンク: <a href="https://hub.docker.com/_/hello-world">DockerHub (hello-world)</a></li>
      </ul>
      <pre><code>PS C:\Users\xxxx&gt; docker run --rm hello-world
Unable to find image &#39;hello-world:latest&#39; locally
latest: Pulling from library/hello-world
17eec7bbc9d7: Pull complete
Digest: sha256:54e66cc1dd1fcb1c3c58bd8017914dbed8701e2d8c74d9262e26bd9cc1642d31
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.  
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/</code></pre>
      <p>上記のメッセージを意訳すると、次のようになります。</p>
      <blockquote>
      <p>Dockerからこんにちは!<br />
      このメッセージは、インストールが正常に動作していることを示しています。</p>
      <p>このメッセージを生成するために、Dockerは次の手順を実行しました。<br />
      1. Docker クライアント が Dockerデーモン に接続しました。<br />
      2. Docker デーモン は、Docker Hub から “hello-world” イメージをプルしました。<br />
      3. Docker デーモン
      は、そのイメージから新しいコンテナを作成し、現在読んでいる出力を生成する実行可能ファイルを実行しました。<br />
      4. Dockerデーモンはその出力を Docker クライアントにストリーミングし、Docker
      クライアントはそれをターミナルに送信しました。</p>
      <p>より野心的なものを試すには、次のように Ubuntuコンテナ を実行します。<br />
      $docker run-it ubuntu bash</p>
      <p>無料の Docker ID を使用して、イメージの共有、ワークフローの自動化などを行います。<br />
      https://hub.docker.com/</p>
      <p>その他の例やアイデアについては、次のサイトを参照してください。<br />
      https://docs.docker.com/get-started/</p>
      </blockquote>
      <h2 data-number="7.4" id="宿題-postgresql-と-dbgate-のイメージのプル-ダウンロード"><span
      class="header-section-number">7.4</span> 宿題: PostgreSQL と DbGate のイメージのプル
      (ダウンロード)</h2>
      <div class="note type-caution">
      <p><strong>注意</strong></p>
      <p><strong>このセクションの作業には、非常に大きなファイルのダウンロードをともないます。学校で授業中には実行せず、自宅などで取り組んでください。</strong></p>
      </div>
      <p>次回の授業では、PostgreSQL と DbGate
      のコンテナを作成します。その準備として、各コンテナの元になるイメージを予めプル
      (ローカルにダウンロード) しておいてください。手順は以下の通りです。</p>
      <p>まず、タスクトレイのアイコンから「Docker
      Desktop」が起動していることを確認してください。Docker Desktop
      の自動起動を「オフ」にしている場合は、以下の作業前に手動で起動しておいてください。</p>
      <p>ターミナル (PowerShell) を起動して、以下のコマンドを1行ずつ実行してください。このコマンドは
      <a href="https://hub.docker.com/">Docker Hub</a>
      から指定の「<strong>イメージ</strong>」をプルしてくるものです。</p>
      <ul>
      <li><code>docker image pull</code>
      コマンドの実行には、回線状況によっては数分から10分程度かかる場合があります。</li>
      </ul>
      <pre><code>docker image pull postgres:17.6
docker image pull dbgate/dbgate:6.6.3</code></pre>
      <ul>
      <li><code>docker pull postgres:17.6</code> のように <code>image</code>
      を省略することもできます。どちらも同じ動作ですが、<code>docker image pull</code>
      のように明示的に書くと、「イメージ」を対象とした操作であることがより分かりやすくなります
      (Docker
      には、主に「イメージ」を対象とした操作と、「コンテナ」を対象とした操作があります)。</li>
      </ul>
      <p>イメージが取得できたことを確認します。以下のコマンドを実行してください。</p>
      <pre><code>docker images</code></pre>
      <p>以下のようにリストのなかに <code>postgres:17.6</code> と <code>dbgate/dbgate:6.6.3</code>
      が含まれていれば OK です。</p>
      <pre><code>REPOSITORY                TAG              IMAGE ID       CREATED         SIZE
postgres                  17.6             3fe059c96160   5 days ago      453MB
dbgate/dbgate             6.6.3            c17f3615b225   4 weeks ago     1.32GB
hello-world               latest           1b44b5a3e06a   7 weeks ago     10.1kB</code></pre>
      <h1 data-number="8" id="授業時間外学習の指示-宿題"><span
      class="header-section-number">8</span> 授業時間外学習の指示 (宿題)</h1>
      <ul>
      <li>次回の講義で「<strong>小テスト</strong>」を実施します。</li>
      <li>📖 教科書 pp.1-15 を読んでおいてください。20分ほどで読めると思います。</li>
      <li>この講義資料を再読・熟読し「不明な用語」や「理解が十分な用語」があればインターネットや、ChatGPTなどの生成AIを利用して解決してください。また、興味関心を持ったトピックについて、ウェブ、生成AI、YouTube動画などを利用して知識を広げ、理解を深めてください。
      <ul>
      <li>特に <strong>(プロンプト例)</strong>
      を示しているものについては、実際に生成AIにプロンプトを投げ、さらに対話を重ねることで、知識の幅を広げるだけでなく、理解をより深く確かなものにしてください。</li>
      </ul></li>
      <li>講義資料内の「演習」に再度取り組んでください。演習内容は、授業時間中に1回取り組むだけでは定着しないので注意してください。</li>
      <li>次回までに、Docker Desktop をインストールして、hello-world
      コンテナが正常に動作することを確認しておいてください。また、<code>docker image pull</code>
      コマンドで <code>postgres:17.6</code> と <code>dbgate/dbgate:6.6.3</code>
      のイメージをプルしておいてください。
      <ul>
      <li>問題があれば <strong>遅くとも講義の前日までにアポをとって解決に向けた相談</strong>
      をしてください。</li>
      </ul></li>
      </ul>
      <!-- ---------------------------------------- -->
    </main>

    <footer class="markdown-body">
      <p><a href="https://takeshiwada1980.github.io/DB-2025/">講義資料のIndexに移動</a></p>
    </footer>

    <script>
      window.onload = function () {
        // ナビゲーション関連
        let openBtn = document.getElementsByClassName("openbtn")[0];
        let navPnl = document.getElementById("g-nav");
        openBtn.onclick = () => {
          openBtn.classList.toggle("active");
          navPnl.classList.toggle("panelactive");
        };

        let items = navPnl.getElementsByTagName("a");
        Array.from(items).forEach((item) => {
          item.onclick = () => {
            openBtn.classList.toggle("active");
            navPnl.classList.toggle("panelactive");
          };
        });

        // マスク処理
        let maskedSpans = document.getElementsByClassName("masked");
        Array.from(maskedSpans).forEach((span) => {
          span.onclick = () => {
            span.classList.toggle("open");
          };
        });

        // data-startfrom 属性の行番号カウンタのリセット
        document.querySelectorAll("div.sourceCode").forEach(function (div) {
          var startFrom = div.getAttribute("data-startfrom");
          if (startFrom != null) {
            div.style.counterReset = "pg-line " + (startFrom - 1);
          }
        });

        // 画像にリンクを付与
        // let images = document.querySelectorAll("figure img");
        // Array.from(images).forEach((img) => {
        //   img.onclick = () => {
        //     location.href = img.getAttribute("src");
        //   };
        // });
      };
    </script>
  </body>
</html>
